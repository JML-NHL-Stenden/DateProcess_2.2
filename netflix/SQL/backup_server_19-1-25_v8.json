--
-- PostgreSQL database cluster dump
--

-- Started on 2025-01-19 18:14:02 CET

SET default_transaction_read_only = off;

SET client_encoding = 'UTF8';
SET standard_conforming_strings = on;

--
-- Roles
--

CREATE ROLE admin;
ALTER ROLE admin WITH SUPERUSER INHERIT CREATEROLE CREATEDB LOGIN REPLICATION BYPASSRLS PASSWORD 'SCRAM-SHA-256$4096:Azcs8xbHOkGZXcbIr9k31Q==$A5798t4rQ6z3lig5p6EscUlBCymCX2QWNtMYw6nSPl8=:wWauBZ7RT0Skl+M9m2L6wA/sI37HR5PDiSFXkhNZuUY=';
CREATE ROLE api_user;
ALTER ROLE api_user WITH NOSUPERUSER INHERIT NOCREATEROLE NOCREATEDB NOLOGIN NOREPLICATION NOBYPASSRLS PASSWORD 'SCRAM-SHA-256$4096:nWQ3lIFwl/LUXBnZX/Xvog==$5MmKz81ZixThdhcXnXBPFKASmtdy2LmN3dELv0cBAzg=:VJqMOqv3h9r/K6qihpjVWPM9Jq4y6ofOKON4JjlpJBc=';
CREATE ROLE junior_user;
ALTER ROLE junior_user WITH NOSUPERUSER INHERIT NOCREATEROLE NOCREATEDB LOGIN NOREPLICATION NOBYPASSRLS PASSWORD 'SCRAM-SHA-256$4096:0GfWE838Y+3VGAwAGCZHQw==$+o4jIzszlvPB8rL6TuheO8G0MqaIIx6jYLSFENnc3qo=:F2gCRlvduxYYXdqG2sKQUQIeyG4QbxCI9DjHi+T8IJI=';
CREATE ROLE medior_user;
ALTER ROLE medior_user WITH NOSUPERUSER INHERIT NOCREATEROLE NOCREATEDB LOGIN NOREPLICATION NOBYPASSRLS PASSWORD 'SCRAM-SHA-256$4096:IktH337nGwkqMBlcCPjNhA==$C4aP15GKzwJwIcSCH8rUBOjyHDzw/6MLV+3chNIyvnA=:WJItA8knThi8H/u34XKdOC23GwdO0+aGWhfggWKc+x8=';
CREATE ROLE postgres;
ALTER ROLE postgres WITH SUPERUSER INHERIT CREATEROLE CREATEDB LOGIN REPLICATION BYPASSRLS PASSWORD 'SCRAM-SHA-256$4096:rDofCIwx9F1Fb6RInznKGA==$BWj+VcoWpZWZ6UtorxXrQk96ZDue+cYdDcmLDG22UC8=:UeQfIp77kQuh8m+TmNflKYZj6zV3tBMJEA/oJM1W6uY=';
CREATE ROLE senior_user;
ALTER ROLE senior_user WITH NOSUPERUSER INHERIT NOCREATEROLE NOCREATEDB LOGIN NOREPLICATION BYPASSRLS PASSWORD 'SCRAM-SHA-256$4096:rc3CSg6nOmP64MCDwILniA==$5tXVQE6jjgrVZDUG2cgLQbFiMpl3VPjM92T1vYS7RhQ=:4Uuub9VHUjsintzKubEryRQ3bpHgwaJv6RNwiCurkss=';

--
-- User Configurations
--








--
-- Databases
--

--
-- Database "template1" dump
--

\connect template1

--
-- PostgreSQL database dump
--

-- Dumped from database version 17.2
-- Dumped by pg_dump version 17.2

-- Started on 2025-01-19 18:14:02 CET

SET statement_timeout = 0;
SET lock_timeout = 0;
SET idle_in_transaction_session_timeout = 0;
SET transaction_timeout = 0;
SET client_encoding = 'UTF8';
SET standard_conforming_strings = on;
SELECT pg_catalog.set_config('search_path', '', false);
SET check_function_bodies = false;
SET xmloption = content;
SET client_min_messages = warning;
SET row_security = off;

-- Completed on 2025-01-19 18:14:02 CET

--
-- PostgreSQL database dump complete
--

--
-- Database "DP_netflix" dump
--

--
-- PostgreSQL database dump
--

-- Dumped from database version 17.2
-- Dumped by pg_dump version 17.2

-- Started on 2025-01-19 18:14:02 CET

SET statement_timeout = 0;
SET lock_timeout = 0;
SET idle_in_transaction_session_timeout = 0;
SET transaction_timeout = 0;
SET client_encoding = 'UTF8';
SET standard_conforming_strings = on;
SELECT pg_catalog.set_config('search_path', '', false);
SET check_function_bodies = false;
SET xmloption = content;
SET client_min_messages = warning;
SET row_security = off;

--
-- TOC entry 4052 (class 1262 OID 18119)
-- Name: DP_netflix; Type: DATABASE; Schema: -; Owner: admin
--

CREATE DATABASE "DP_netflix" WITH TEMPLATE = template0 ENCODING = 'UTF8' LOCALE_PROVIDER = libc LOCALE = 'C';


ALTER DATABASE "DP_netflix" OWNER TO admin;

\connect "DP_netflix"

SET statement_timeout = 0;
SET lock_timeout = 0;
SET idle_in_transaction_session_timeout = 0;
SET transaction_timeout = 0;
SET client_encoding = 'UTF8';
SET standard_conforming_strings = on;
SELECT pg_catalog.set_config('search_path', '', false);
SET check_function_bodies = false;
SET xmloption = content;
SET client_min_messages = warning;
SET row_security = off;

--
-- TOC entry 7 (class 2615 OID 19919)
-- Name: pgagent; Type: SCHEMA; Schema: -; Owner: postgres
--

CREATE SCHEMA pgagent;


ALTER SCHEMA pgagent OWNER TO postgres;

--
-- TOC entry 4053 (class 0 OID 0)
-- Dependencies: 7
-- Name: SCHEMA pgagent; Type: COMMENT; Schema: -; Owner: postgres
--

COMMENT ON SCHEMA pgagent IS 'pgAgent system tables';


--
-- TOC entry 2 (class 3079 OID 19920)
-- Name: pgagent; Type: EXTENSION; Schema: -; Owner: -
--

CREATE EXTENSION IF NOT EXISTS pgagent WITH SCHEMA pgagent;


--
-- TOC entry 4054 (class 0 OID 0)
-- Dependencies: 2
-- Name: EXTENSION pgagent; Type: COMMENT; Schema: -; Owner: 
--

COMMENT ON EXTENSION pgagent IS 'A PostgreSQL job scheduler';


--
-- TOC entry 1004 (class 1247 OID 18804)
-- Name: activity_enum; Type: TYPE; Schema: public; Owner: postgres
--

CREATE TYPE public.activity_enum AS ENUM (
    'LOGIN',
    'VIEW_MOVIE',
    'VIEW_SERIES',
    'LOGOUT'
);


ALTER TYPE public.activity_enum OWNER TO postgres;

--
-- TOC entry 311 (class 1255 OID 18824)
-- Name: calculate_subscription_end_date(); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.calculate_subscription_end_date() RETURNS trigger
    LANGUAGE plpgsql
    AS $$
BEGIN
    IF NEW.subscription_type = 'MONTHLY' THEN
        NEW.subscription_end_date = CURRENT_DATE + INTERVAL '1 month';
    ELSIF NEW.subscription_type = 'YEARLY' THEN
        NEW.subscription_end_date = CURRENT_DATE + INTERVAL '1 year';
    ELSE
        RAISE EXCEPTION 'Invalid subscription type';
    END IF;
    RETURN NEW;
END;
$$;


ALTER FUNCTION public.calculate_subscription_end_date() OWNER TO postgres;

--
-- TOC entry 293 (class 1255 OID 18487)
-- Name: check_profile_limit(); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.check_profile_limit() RETURNS trigger
    LANGUAGE plpgsql
    AS $$
BEGIN
    IF (SELECT COUNT(*) FROM profile WHERE account_id = NEW.account_id) >= 4 THEN
        RAISE EXCEPTION 'An account cannot have more than 4 profiles.';
    END IF;
    RETURN NEW;
END;
$$;


ALTER FUNCTION public.check_profile_limit() OWNER TO postgres;

--
-- TOC entry 309 (class 1255 OID 18789)
-- Name: enforce_age_restriction(); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.enforce_age_restriction() RETURNS trigger
    LANGUAGE plpgsql
    AS $$
BEGIN
    IF NEW.movie_id IS NOT NULL THEN
        IF (SELECT minimum_age FROM classification c
                                        INNER JOIN movie_classification mc ON c.classification_id = mc.classification_id
            WHERE mc.movie_id = NEW.movie_id) > (SELECT profile_age FROM profile WHERE profile_id = NEW.profile_id) THEN
            RAISE EXCEPTION 'Profile age does not meet the minimum age requirement for this movie.';
        END IF;
    ELSIF NEW.episode_id IS NOT NULL THEN
        IF (SELECT minimum_age FROM classification c
                                        INNER JOIN series_classification sc ON c.classification_id = sc.classification_id
                                        INNER JOIN season s ON s.series_id = sc.series_id
            WHERE s.season_id = (SELECT season_id FROM episode WHERE episode_id = NEW.episode_id)) >
           (SELECT profile_age FROM profile WHERE profile_id = NEW.profile_id) THEN
            RAISE EXCEPTION 'Profile age does not meet the minimum age requirement for this episode.';
        END IF;
    END IF;
    RETURN NEW;
END;
$$;


ALTER FUNCTION public.enforce_age_restriction() OWNER TO postgres;

--
-- TOC entry 314 (class 1255 OID 18847)
-- Name: get_account_data(text); Type: FUNCTION; Schema: public; Owner: admin
--

CREATE FUNCTION public.get_account_data(role_name text) RETURNS TABLE(account_id integer, email character varying, created_date timestamp without time zone, role character varying)
    LANGUAGE plpgsql
    AS $$
BEGIN
    IF role_name = 'JUNIOR' THEN
        RETURN QUERY SELECT
                         junior_account_view.account_id,
                         NULL::VARCHAR(255) AS email,
                         junior_account_view.account_created_date AS created_date,
                         junior_account_view.role
                     FROM junior_account_view;
    ELSIF role_name = 'MEDIOR' THEN
        RETURN QUERY SELECT
                         medior_account_view.account_id,
                         medior_account_view.email,
                         medior_account_view.account_created_date AS created_date,
                         medior_account_view.role
                     FROM medior_account_view;
    ELSIF role_name = 'SENIOR' THEN
        RETURN QUERY SELECT
                         senior_account_view.account_id,
                         senior_account_view.email,
                         senior_account_view.account_created_date AS created_date,
                         senior_account_view.role
                     FROM senior_account_view;
    ELSE
        RAISE EXCEPTION 'Invalid role: %', role_name;
    END IF;
END;
$$;


ALTER FUNCTION public.get_account_data(role_name text) OWNER TO admin;

--
-- TOC entry 286 (class 1255 OID 18788)
-- Name: get_series_data(); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.get_series_data() RETURNS TABLE(series_id integer, title character varying, total_seasons integer)
    LANGUAGE plpgsql
    AS $$
BEGIN
    RETURN QUERY SELECT series_id, title, total_seasons FROM series;
END;
$$;


ALTER FUNCTION public.get_series_data() OWNER TO postgres;

--
-- TOC entry 292 (class 1255 OID 18802)
-- Name: get_total_watch_time(integer); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.get_total_watch_time(profile_id integer) RETURNS numeric
    LANGUAGE plpgsql
    AS $$
BEGIN
    RETURN (SELECT COALESCE(SUM(
                                    CASE
                                        WHEN w.episode_id IS NOT NULL THEN EXTRACT(EPOCH FROM e.duration)
                                        WHEN w.movie_id IS NOT NULL THEN EXTRACT(EPOCH FROM m.duration)
                                        ELSE 0
                                        END
                            ), 0)
            FROM watch_history w
                     LEFT JOIN episode e ON w.episode_id = e.episode_id
                     LEFT JOIN movie m ON w.movie_id = m.movie_id
            WHERE w.profile_id = profile_id);
END;
$$;


ALTER FUNCTION public.get_total_watch_time(profile_id integer) OWNER TO postgres;

--
-- TOC entry 287 (class 1255 OID 18801)
-- Name: log_api_request(text, text, text); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.log_api_request(api_name text, request_payload text, response_payload text) RETURNS void
    LANGUAGE plpgsql
    AS $$
BEGIN
    INSERT INTO external_api_log (api_name, request_payload, response_payload)
    VALUES (api_name, request_payload, response_payload);
END;
$$;


ALTER FUNCTION public.log_api_request(api_name text, request_payload text, response_payload text) OWNER TO postgres;

--
-- TOC entry 313 (class 1255 OID 18828)
-- Name: log_user_activity_changes(); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.log_user_activity_changes() RETURNS trigger
    LANGUAGE plpgsql
    AS $$
BEGIN
    INSERT INTO external_api_log (api_name, request_payload, response_payload, created_at)
    VALUES (
               'User Activity Change',
               OLD::TEXT, -- Convert the OLD row to text
               NEW::TEXT, -- Convert the NEW row to text
               CURRENT_TIMESTAMP
           );
    RETURN NEW;
END;
$$;


ALTER FUNCTION public.log_user_activity_changes() OWNER TO postgres;

--
-- TOC entry 312 (class 1255 OID 18826)
-- Name: mark_as_featured(); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.mark_as_featured() RETURNS trigger
    LANGUAGE plpgsql
    AS $$
BEGIN
    IF NEW.times_watched > 100 THEN
        IF NEW.movie_id IS NOT NULL THEN
            UPDATE movie SET is_featured = TRUE WHERE movie_id = NEW.movie_id;
        ELSIF NEW.episode_id IS NOT NULL THEN
            UPDATE series
            SET is_featured = TRUE
            WHERE series_id = (SELECT series_id FROM season WHERE season_id = (SELECT season_id FROM episode WHERE episode_id = NEW.episode_id));
        END IF;
    END IF;
    RETURN NEW;
END;
$$;


ALTER FUNCTION public.mark_as_featured() OWNER TO postgres;

--
-- TOC entry 288 (class 1255 OID 19753)
-- Name: sp_insert_movie(character varying, character varying, date, text, boolean); Type: FUNCTION; Schema: public; Owner: admin
--

CREATE FUNCTION public.sp_insert_movie(p_title character varying, p_duration character varying, p_release_date date, p_description text, p_is_featured boolean) RETURNS void
    LANGUAGE plpgsql
    AS $$
BEGIN
    INSERT INTO movie (title, duration, release_date, description, is_featured)
    VALUES (p_title, p_duration, p_release_date, p_description, p_is_featured);
END;
$$;


ALTER FUNCTION public.sp_insert_movie(p_title character varying, p_duration character varying, p_release_date date, p_description text, p_is_featured boolean) OWNER TO admin;

--
-- TOC entry 310 (class 1255 OID 18822)
-- Name: update_series_total_seasons(); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.update_series_total_seasons() RETURNS trigger
    LANGUAGE plpgsql
    AS $$
BEGIN
    UPDATE series
    SET total_seasons = (SELECT COUNT(*) FROM season WHERE series_id = NEW.series_id)
    WHERE series_id = NEW.series_id;
    RETURN NEW;
END;
$$;


ALTER FUNCTION public.update_series_total_seasons() OWNER TO postgres;

--
-- TOC entry 294 (class 1255 OID 18819)
-- Name: validate_subscription_discount(); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.validate_subscription_discount() RETURNS trigger
    LANGUAGE plpgsql
    AS $$
BEGIN
    IF NEW.discount < 0 OR NEW.discount > 100 THEN
        RAISE EXCEPTION 'Discount must be between 0 and 100.';
    END IF;
    RETURN NEW;
END;
$$;


ALTER FUNCTION public.validate_subscription_discount() OWNER TO postgres;

SET default_tablespace = '';

SET default_table_access_method = heap;

--
-- TOC entry 220 (class 1259 OID 18184)
-- Name: account; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.account (
    account_id integer NOT NULL,
    email character varying(255) NOT NULL,
    password character varying(255) NOT NULL,
    payment_method character varying(255),
    is_blocked boolean DEFAULT false,
    restore_token integer,
    account_created_date timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    init_duration_end timestamp(6) without time zone,
    password_method character varying(255),
    payment_account_string character varying(255),
    id bigint NOT NULL,
    role character varying(50) NOT NULL,
    CONSTRAINT email_format_check CHECK (((email)::text ~* '^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$'::text))
);


ALTER TABLE public.account OWNER TO postgres;

--
-- TOC entry 219 (class 1259 OID 18183)
-- Name: account_account_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.account_account_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.account_account_id_seq OWNER TO postgres;

--
-- TOC entry 4055 (class 0 OID 0)
-- Dependencies: 219
-- Name: account_account_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.account_account_id_seq OWNED BY public.account.account_id;


--
-- TOC entry 260 (class 1259 OID 18729)
-- Name: account_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.account ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.account_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 228 (class 1259 OID 18223)
-- Name: classification; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.classification (
    classification_id integer NOT NULL,
    minimum_age integer,
    characteristics character varying(255) NOT NULL,
    CONSTRAINT classification_minimum_age_check CHECK ((minimum_age >= 0))
);


ALTER TABLE public.classification OWNER TO postgres;

--
-- TOC entry 227 (class 1259 OID 18222)
-- Name: classification_classification_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.classification_classification_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.classification_classification_id_seq OWNER TO postgres;

--
-- TOC entry 4056 (class 0 OID 0)
-- Dependencies: 227
-- Name: classification_classification_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.classification_classification_id_seq OWNED BY public.classification.classification_id;


--
-- TOC entry 238 (class 1259 OID 18287)
-- Name: episode; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.episode (
    episode_id integer NOT NULL,
    title character varying(255) NOT NULL,
    duration time(6) without time zone NOT NULL,
    season_id integer NOT NULL
);


ALTER TABLE public.episode OWNER TO postgres;

--
-- TOC entry 237 (class 1259 OID 18286)
-- Name: episode_episode_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.episode_episode_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.episode_episode_id_seq OWNER TO postgres;

--
-- TOC entry 4057 (class 0 OID 0)
-- Dependencies: 237
-- Name: episode_episode_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.episode_episode_id_seq OWNED BY public.episode.episode_id;


--
-- TOC entry 263 (class 1259 OID 18766)
-- Name: external_api_log; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.external_api_log (
    log_id integer NOT NULL,
    api_name character varying(255),
    request_payload text,
    response_payload text,
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP
);


ALTER TABLE public.external_api_log OWNER TO postgres;

--
-- TOC entry 262 (class 1259 OID 18765)
-- Name: external_api_log_log_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.external_api_log_log_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.external_api_log_log_id_seq OWNER TO postgres;

--
-- TOC entry 4058 (class 0 OID 0)
-- Dependencies: 262
-- Name: external_api_log_log_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.external_api_log_log_id_seq OWNED BY public.external_api_log.log_id;


--
-- TOC entry 222 (class 1259 OID 18197)
-- Name: genre; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.genre (
    genre_id integer NOT NULL,
    genre_name character varying(255) NOT NULL
);


ALTER TABLE public.genre OWNER TO postgres;

--
-- TOC entry 221 (class 1259 OID 18196)
-- Name: genre_genre_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.genre_genre_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.genre_genre_id_seq OWNER TO postgres;

--
-- TOC entry 4059 (class 0 OID 0)
-- Dependencies: 221
-- Name: genre_genre_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.genre_genre_id_seq OWNED BY public.genre.genre_id;


--
-- TOC entry 267 (class 1259 OID 18830)
-- Name: junior_account_view; Type: VIEW; Schema: public; Owner: postgres
--

CREATE VIEW public.junior_account_view AS
 SELECT account_id,
    account_created_date,
    is_blocked,
    role
   FROM public.account;


ALTER VIEW public.junior_account_view OWNER TO postgres;

--
-- TOC entry 232 (class 1259 OID 18240)
-- Name: profile; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.profile (
    profile_id integer NOT NULL,
    account_id bigint NOT NULL,
    profile_image character varying(255),
    profile_age integer,
    is_profile_child boolean DEFAULT false,
    language character varying(255),
    profile_name character varying(255) NOT NULL,
    CONSTRAINT profile_profile_age_check CHECK ((profile_age >= 0))
);


ALTER TABLE public.profile OWNER TO postgres;

--
-- TOC entry 261 (class 1259 OID 18761)
-- Name: junior_profile_view; Type: VIEW; Schema: public; Owner: postgres
--

CREATE VIEW public.junior_profile_view AS
 SELECT profile_id,
    profile_name,
    profile_image,
    profile_age,
    language
   FROM public.profile;


ALTER VIEW public.junior_profile_view OWNER TO postgres;

--
-- TOC entry 268 (class 1259 OID 18834)
-- Name: medior_account_view; Type: VIEW; Schema: public; Owner: postgres
--

CREATE VIEW public.medior_account_view AS
 SELECT account_id,
    email,
    account_created_date,
    is_blocked,
    role
   FROM public.account;


ALTER VIEW public.medior_account_view OWNER TO postgres;

--
-- TOC entry 266 (class 1259 OID 18797)
-- Name: medior_profile_view; Type: VIEW; Schema: public; Owner: postgres
--

CREATE VIEW public.medior_profile_view AS
 SELECT profile_id,
    profile_name,
    profile_image,
    profile_age,
    language
   FROM public.profile;


ALTER VIEW public.medior_profile_view OWNER TO postgres;

--
-- TOC entry 224 (class 1259 OID 18206)
-- Name: movie; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.movie (
    movie_id integer NOT NULL,
    title character varying(255) NOT NULL,
    duration time(6) without time zone,
    release_date date NOT NULL,
    description character varying(255),
    is_featured boolean,
    classification_id integer
);


ALTER TABLE public.movie OWNER TO postgres;

--
-- TOC entry 252 (class 1259 OID 18412)
-- Name: movie_classification; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.movie_classification (
    movie_classification_id integer NOT NULL,
    movie_id integer NOT NULL,
    classification_id integer NOT NULL
);


ALTER TABLE public.movie_classification OWNER TO postgres;

--
-- TOC entry 251 (class 1259 OID 18411)
-- Name: movie_classification_movie_classification_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.movie_classification_movie_classification_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.movie_classification_movie_classification_id_seq OWNER TO postgres;

--
-- TOC entry 4064 (class 0 OID 0)
-- Dependencies: 251
-- Name: movie_classification_movie_classification_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.movie_classification_movie_classification_id_seq OWNED BY public.movie_classification.movie_classification_id;


--
-- TOC entry 248 (class 1259 OID 18374)
-- Name: movie_genre; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.movie_genre (
    movie_genre_id integer NOT NULL,
    movie_id integer NOT NULL,
    genre_id integer NOT NULL
);


ALTER TABLE public.movie_genre OWNER TO postgres;

--
-- TOC entry 247 (class 1259 OID 18373)
-- Name: movie_genre_movie_genre_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.movie_genre_movie_genre_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.movie_genre_movie_genre_id_seq OWNER TO postgres;

--
-- TOC entry 4065 (class 0 OID 0)
-- Dependencies: 247
-- Name: movie_genre_movie_genre_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.movie_genre_movie_genre_id_seq OWNED BY public.movie_genre.movie_genre_id;


--
-- TOC entry 223 (class 1259 OID 18205)
-- Name: movie_movie_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.movie_movie_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.movie_movie_id_seq OWNER TO postgres;

--
-- TOC entry 4066 (class 0 OID 0)
-- Dependencies: 223
-- Name: movie_movie_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.movie_movie_id_seq OWNED BY public.movie.movie_id;


--
-- TOC entry 256 (class 1259 OID 18450)
-- Name: movie_quality; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.movie_quality (
    movie_quality_id integer NOT NULL,
    movie_id integer NOT NULL,
    quality_id integer NOT NULL,
    is_available boolean DEFAULT true
);


ALTER TABLE public.movie_quality OWNER TO postgres;

--
-- TOC entry 255 (class 1259 OID 18449)
-- Name: movie_quality_movie_quality_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.movie_quality_movie_quality_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.movie_quality_movie_quality_id_seq OWNER TO postgres;

--
-- TOC entry 4067 (class 0 OID 0)
-- Dependencies: 255
-- Name: movie_quality_movie_quality_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.movie_quality_movie_quality_id_seq OWNED BY public.movie_quality.movie_quality_id;


--
-- TOC entry 240 (class 1259 OID 18299)
-- Name: preferences; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.preferences (
    preference_id integer NOT NULL,
    profile_id integer NOT NULL,
    genre_id integer,
    age_preference integer,
    content_type character varying(255),
    blacklist_classification character varying(255)
);


ALTER TABLE public.preferences OWNER TO postgres;

--
-- TOC entry 239 (class 1259 OID 18298)
-- Name: preferences_preference_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.preferences_preference_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.preferences_preference_id_seq OWNER TO postgres;

--
-- TOC entry 4068 (class 0 OID 0)
-- Dependencies: 239
-- Name: preferences_preference_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.preferences_preference_id_seq OWNED BY public.preferences.preference_id;


--
-- TOC entry 231 (class 1259 OID 18239)
-- Name: profile_profile_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.profile_profile_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.profile_profile_id_seq OWNER TO postgres;

--
-- TOC entry 4069 (class 0 OID 0)
-- Dependencies: 231
-- Name: profile_profile_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.profile_profile_id_seq OWNED BY public.profile.profile_id;


--
-- TOC entry 230 (class 1259 OID 18231)
-- Name: quality; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.quality (
    quality_id integer NOT NULL,
    quality_name character varying(255) NOT NULL,
    quality character varying(255)
);


ALTER TABLE public.quality OWNER TO postgres;

--
-- TOC entry 229 (class 1259 OID 18230)
-- Name: quality_quality_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.quality_quality_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.quality_quality_id_seq OWNER TO postgres;

--
-- TOC entry 4070 (class 0 OID 0)
-- Dependencies: 229
-- Name: quality_quality_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.quality_quality_id_seq OWNED BY public.quality.quality_id;


--
-- TOC entry 236 (class 1259 OID 18274)
-- Name: season; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.season (
    season_id integer NOT NULL,
    season_number integer NOT NULL,
    series_id integer NOT NULL,
    CONSTRAINT season_season_number_check CHECK ((season_number > 0))
);


ALTER TABLE public.season OWNER TO postgres;

--
-- TOC entry 235 (class 1259 OID 18273)
-- Name: season_season_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.season_season_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.season_season_id_seq OWNER TO postgres;

--
-- TOC entry 4071 (class 0 OID 0)
-- Dependencies: 235
-- Name: season_season_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.season_season_id_seq OWNED BY public.season.season_id;


--
-- TOC entry 269 (class 1259 OID 18838)
-- Name: senior_account_view; Type: VIEW; Schema: public; Owner: postgres
--

CREATE VIEW public.senior_account_view AS
 SELECT account_id,
    email,
    password,
    payment_method,
    is_blocked,
    restore_token,
    account_created_date,
    init_duration_end,
    password_method,
    payment_account_string,
    id,
    role
   FROM public.account;


ALTER VIEW public.senior_account_view OWNER TO postgres;

--
-- TOC entry 226 (class 1259 OID 18213)
-- Name: series; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.series (
    series_id integer NOT NULL,
    title character varying(255) NOT NULL,
    description character varying(255),
    total_seasons integer,
    release_date date NOT NULL,
    is_featured boolean,
    CONSTRAINT series_total_seasons_check CHECK ((total_seasons >= 0))
);


ALTER TABLE public.series OWNER TO postgres;

--
-- TOC entry 254 (class 1259 OID 18431)
-- Name: series_classification; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.series_classification (
    series_classification_id integer NOT NULL,
    series_id integer NOT NULL,
    classification_id integer NOT NULL
);


ALTER TABLE public.series_classification OWNER TO postgres;

--
-- TOC entry 253 (class 1259 OID 18430)
-- Name: series_classification_series_classification_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.series_classification_series_classification_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.series_classification_series_classification_id_seq OWNER TO postgres;

--
-- TOC entry 4073 (class 0 OID 0)
-- Dependencies: 253
-- Name: series_classification_series_classification_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.series_classification_series_classification_id_seq OWNED BY public.series_classification.series_classification_id;


--
-- TOC entry 250 (class 1259 OID 18393)
-- Name: series_genre; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.series_genre (
    series_genre_id integer NOT NULL,
    series_id integer NOT NULL,
    genre_id integer NOT NULL
);


ALTER TABLE public.series_genre OWNER TO postgres;

--
-- TOC entry 249 (class 1259 OID 18392)
-- Name: series_genre_series_genre_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.series_genre_series_genre_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.series_genre_series_genre_id_seq OWNER TO postgres;

--
-- TOC entry 4074 (class 0 OID 0)
-- Dependencies: 249
-- Name: series_genre_series_genre_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.series_genre_series_genre_id_seq OWNED BY public.series_genre.series_genre_id;


--
-- TOC entry 258 (class 1259 OID 18469)
-- Name: series_quality; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.series_quality (
    series_quality_id integer NOT NULL,
    series_id integer NOT NULL,
    quality_id integer NOT NULL
);


ALTER TABLE public.series_quality OWNER TO postgres;

--
-- TOC entry 257 (class 1259 OID 18468)
-- Name: series_quality_series_quality_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.series_quality_series_quality_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.series_quality_series_quality_id_seq OWNER TO postgres;

--
-- TOC entry 4075 (class 0 OID 0)
-- Dependencies: 257
-- Name: series_quality_series_quality_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.series_quality_series_quality_id_seq OWNED BY public.series_quality.series_quality_id;


--
-- TOC entry 225 (class 1259 OID 18212)
-- Name: series_series_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.series_series_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.series_series_id_seq OWNER TO postgres;

--
-- TOC entry 4076 (class 0 OID 0)
-- Dependencies: 225
-- Name: series_series_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.series_series_id_seq OWNED BY public.series.series_id;


--
-- TOC entry 234 (class 1259 OID 18256)
-- Name: subscription; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.subscription (
    subscription_id integer NOT NULL,
    account_id bigint NOT NULL,
    subscription_type character varying(255) NOT NULL,
    description character varying(255),
    subscription_price double precision NOT NULL,
    discount double precision DEFAULT 0,
    user_invitation boolean DEFAULT false,
    subscription_end_date timestamp(6) without time zone,
    subscription_start_date timestamp(6) without time zone,
    CONSTRAINT subscription_discount_check CHECK (((discount >= ((0)::numeric)::double precision) AND (discount <= ((100)::numeric)::double precision))),
    CONSTRAINT subscription_price_check CHECK ((subscription_price >= (0)::double precision)),
    CONSTRAINT subscription_subscription_price_check CHECK ((subscription_price >= ((0)::numeric)::double precision))
);


ALTER TABLE public.subscription OWNER TO postgres;

--
-- TOC entry 233 (class 1259 OID 18255)
-- Name: subscription_subscription_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.subscription_subscription_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.subscription_subscription_id_seq OWNER TO postgres;

--
-- TOC entry 4077 (class 0 OID 0)
-- Dependencies: 233
-- Name: subscription_subscription_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.subscription_subscription_id_seq OWNED BY public.subscription.subscription_id;


--
-- TOC entry 244 (class 1259 OID 18333)
-- Name: subtitle; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.subtitle (
    subtitle_id integer NOT NULL,
    movie_id integer,
    episode_id integer,
    language character varying(255),
    subtitle_location character varying(255),
    is_available boolean DEFAULT true
);


ALTER TABLE public.subtitle OWNER TO postgres;

--
-- TOC entry 243 (class 1259 OID 18332)
-- Name: subtitle_subtitle_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.subtitle_subtitle_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.subtitle_subtitle_id_seq OWNER TO postgres;

--
-- TOC entry 4078 (class 0 OID 0)
-- Dependencies: 243
-- Name: subtitle_subtitle_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.subtitle_subtitle_id_seq OWNED BY public.subtitle.subtitle_id;


--
-- TOC entry 265 (class 1259 OID 18776)
-- Name: user_activity; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.user_activity (
    activity_id integer NOT NULL,
    account_id integer,
    activity_type public.activity_enum,
    activity_timestamp timestamp without time zone DEFAULT CURRENT_TIMESTAMP
);


ALTER TABLE public.user_activity OWNER TO postgres;

--
-- TOC entry 264 (class 1259 OID 18775)
-- Name: user_activity_activity_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.user_activity_activity_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.user_activity_activity_id_seq OWNER TO postgres;

--
-- TOC entry 4079 (class 0 OID 0)
-- Dependencies: 264
-- Name: user_activity_activity_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.user_activity_activity_id_seq OWNED BY public.user_activity.activity_id;


--
-- TOC entry 270 (class 1259 OID 19749)
-- Name: view_movies; Type: VIEW; Schema: public; Owner: admin
--

CREATE VIEW public.view_movies AS
 SELECT movie_id,
    title,
    duration,
    description,
    is_featured
   FROM public.movie;


ALTER VIEW public.view_movies OWNER TO admin;

--
-- TOC entry 242 (class 1259 OID 18318)
-- Name: watch_history; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.watch_history (
    watch_history_id integer NOT NULL,
    profile_id integer NOT NULL,
    watch_date_time timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    times_watched integer DEFAULT 1,
    response_format character varying(10),
    duration interval,
    CONSTRAINT watch_history_times_watched_check CHECK ((times_watched >= 1))
);


ALTER TABLE public.watch_history OWNER TO postgres;

--
-- TOC entry 241 (class 1259 OID 18317)
-- Name: watch_history_watch_history_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.watch_history_watch_history_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.watch_history_watch_history_id_seq OWNER TO postgres;

--
-- TOC entry 4081 (class 0 OID 0)
-- Dependencies: 241
-- Name: watch_history_watch_history_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.watch_history_watch_history_id_seq OWNED BY public.watch_history.watch_history_id;


--
-- TOC entry 246 (class 1259 OID 18352)
-- Name: watch_list; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.watch_list (
    watch_list_id integer NOT NULL,
    profile_id integer NOT NULL,
    movie_id integer,
    episode_id integer,
    watchlist_id integer NOT NULL
);


ALTER TABLE public.watch_list OWNER TO postgres;

--
-- TOC entry 245 (class 1259 OID 18351)
-- Name: watch_list_watch_list_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.watch_list_watch_list_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.watch_list_watch_list_id_seq OWNER TO postgres;

--
-- TOC entry 4082 (class 0 OID 0)
-- Dependencies: 245
-- Name: watch_list_watch_list_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.watch_list_watch_list_id_seq OWNED BY public.watch_list.watch_list_id;


--
-- TOC entry 259 (class 1259 OID 18556)
-- Name: watch_list_watchlist_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.watch_list ALTER COLUMN watchlist_id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.watch_list_watchlist_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 3643 (class 2604 OID 18187)
-- Name: account account_id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.account ALTER COLUMN account_id SET DEFAULT nextval('public.account_account_id_seq'::regclass);


--
-- TOC entry 3649 (class 2604 OID 18226)
-- Name: classification classification_id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.classification ALTER COLUMN classification_id SET DEFAULT nextval('public.classification_classification_id_seq'::regclass);


--
-- TOC entry 3657 (class 2604 OID 18290)
-- Name: episode episode_id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.episode ALTER COLUMN episode_id SET DEFAULT nextval('public.episode_episode_id_seq'::regclass);


--
-- TOC entry 3672 (class 2604 OID 18769)
-- Name: external_api_log log_id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.external_api_log ALTER COLUMN log_id SET DEFAULT nextval('public.external_api_log_log_id_seq'::regclass);


--
-- TOC entry 3646 (class 2604 OID 18200)
-- Name: genre genre_id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.genre ALTER COLUMN genre_id SET DEFAULT nextval('public.genre_genre_id_seq'::regclass);


--
-- TOC entry 3647 (class 2604 OID 18209)
-- Name: movie movie_id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.movie ALTER COLUMN movie_id SET DEFAULT nextval('public.movie_movie_id_seq'::regclass);


--
-- TOC entry 3667 (class 2604 OID 18415)
-- Name: movie_classification movie_classification_id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.movie_classification ALTER COLUMN movie_classification_id SET DEFAULT nextval('public.movie_classification_movie_classification_id_seq'::regclass);


--
-- TOC entry 3665 (class 2604 OID 18377)
-- Name: movie_genre movie_genre_id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.movie_genre ALTER COLUMN movie_genre_id SET DEFAULT nextval('public.movie_genre_movie_genre_id_seq'::regclass);


--
-- TOC entry 3669 (class 2604 OID 18453)
-- Name: movie_quality movie_quality_id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.movie_quality ALTER COLUMN movie_quality_id SET DEFAULT nextval('public.movie_quality_movie_quality_id_seq'::regclass);


--
-- TOC entry 3658 (class 2604 OID 18302)
-- Name: preferences preference_id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.preferences ALTER COLUMN preference_id SET DEFAULT nextval('public.preferences_preference_id_seq'::regclass);


--
-- TOC entry 3651 (class 2604 OID 18243)
-- Name: profile profile_id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.profile ALTER COLUMN profile_id SET DEFAULT nextval('public.profile_profile_id_seq'::regclass);


--
-- TOC entry 3650 (class 2604 OID 18234)
-- Name: quality quality_id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.quality ALTER COLUMN quality_id SET DEFAULT nextval('public.quality_quality_id_seq'::regclass);


--
-- TOC entry 3656 (class 2604 OID 18277)
-- Name: season season_id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.season ALTER COLUMN season_id SET DEFAULT nextval('public.season_season_id_seq'::regclass);


--
-- TOC entry 3648 (class 2604 OID 18216)
-- Name: series series_id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.series ALTER COLUMN series_id SET DEFAULT nextval('public.series_series_id_seq'::regclass);


--
-- TOC entry 3668 (class 2604 OID 18434)
-- Name: series_classification series_classification_id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.series_classification ALTER COLUMN series_classification_id SET DEFAULT nextval('public.series_classification_series_classification_id_seq'::regclass);


--
-- TOC entry 3666 (class 2604 OID 18396)
-- Name: series_genre series_genre_id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.series_genre ALTER COLUMN series_genre_id SET DEFAULT nextval('public.series_genre_series_genre_id_seq'::regclass);


--
-- TOC entry 3671 (class 2604 OID 18472)
-- Name: series_quality series_quality_id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.series_quality ALTER COLUMN series_quality_id SET DEFAULT nextval('public.series_quality_series_quality_id_seq'::regclass);


--
-- TOC entry 3653 (class 2604 OID 18259)
-- Name: subscription subscription_id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.subscription ALTER COLUMN subscription_id SET DEFAULT nextval('public.subscription_subscription_id_seq'::regclass);


--
-- TOC entry 3662 (class 2604 OID 18336)
-- Name: subtitle subtitle_id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.subtitle ALTER COLUMN subtitle_id SET DEFAULT nextval('public.subtitle_subtitle_id_seq'::regclass);


--
-- TOC entry 3674 (class 2604 OID 18779)
-- Name: user_activity activity_id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.user_activity ALTER COLUMN activity_id SET DEFAULT nextval('public.user_activity_activity_id_seq'::regclass);


--
-- TOC entry 3659 (class 2604 OID 18321)
-- Name: watch_history watch_history_id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.watch_history ALTER COLUMN watch_history_id SET DEFAULT nextval('public.watch_history_watch_history_id_seq'::regclass);


--
-- TOC entry 3664 (class 2604 OID 18355)
-- Name: watch_list watch_list_id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.watch_list ALTER COLUMN watch_list_id SET DEFAULT nextval('public.watch_list_watch_list_id_seq'::regclass);


--
-- TOC entry 3635 (class 0 OID 19921)
-- Dependencies: 271
-- Data for Name: pga_jobagent; Type: TABLE DATA; Schema: pgagent; Owner: postgres
--

COPY pgagent.pga_jobagent (jagpid, jaglogintime, jagstation) FROM stdin;
\.


--
-- TOC entry 3636 (class 0 OID 19930)
-- Dependencies: 273
-- Data for Name: pga_jobclass; Type: TABLE DATA; Schema: pgagent; Owner: postgres
--

COPY pgagent.pga_jobclass (jclid, jclname) FROM stdin;
\.


--
-- TOC entry 3637 (class 0 OID 19940)
-- Dependencies: 275
-- Data for Name: pga_job; Type: TABLE DATA; Schema: pgagent; Owner: postgres
--

COPY pgagent.pga_job (jobid, jobjclid, jobname, jobdesc, jobhostagent, jobenabled, jobcreated, jobchanged, jobagentid, jobnextrun, joblastrun) FROM stdin;
\.


--
-- TOC entry 3639 (class 0 OID 19988)
-- Dependencies: 279
-- Data for Name: pga_schedule; Type: TABLE DATA; Schema: pgagent; Owner: postgres
--

COPY pgagent.pga_schedule (jscid, jscjobid, jscname, jscdesc, jscenabled, jscstart, jscend, jscminutes, jschours, jscweekdays, jscmonthdays, jscmonths) FROM stdin;
\.


--
-- TOC entry 3640 (class 0 OID 20016)
-- Dependencies: 281
-- Data for Name: pga_exception; Type: TABLE DATA; Schema: pgagent; Owner: postgres
--

COPY pgagent.pga_exception (jexid, jexscid, jexdate, jextime) FROM stdin;
\.


--
-- TOC entry 3641 (class 0 OID 20030)
-- Dependencies: 283
-- Data for Name: pga_joblog; Type: TABLE DATA; Schema: pgagent; Owner: postgres
--

COPY pgagent.pga_joblog (jlgid, jlgjobid, jlgstatus, jlgstart, jlgduration) FROM stdin;
\.


--
-- TOC entry 3638 (class 0 OID 19964)
-- Dependencies: 277
-- Data for Name: pga_jobstep; Type: TABLE DATA; Schema: pgagent; Owner: postgres
--

COPY pgagent.pga_jobstep (jstid, jstjobid, jstname, jstdesc, jstenabled, jstkind, jstcode, jstconnstr, jstdbname, jstonerror, jscnextrun) FROM stdin;
\.


--
-- TOC entry 3642 (class 0 OID 20046)
-- Dependencies: 285
-- Data for Name: pga_jobsteplog; Type: TABLE DATA; Schema: pgagent; Owner: postgres
--

COPY pgagent.pga_jobsteplog (jslid, jsljlgid, jsljstid, jslstatus, jslresult, jslstart, jslduration, jsloutput) FROM stdin;
\.


--
-- TOC entry 4002 (class 0 OID 18184)
-- Dependencies: 220
-- Data for Name: account; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.account (account_id, email, password, payment_method, is_blocked, restore_token, account_created_date, init_duration_end, password_method, payment_account_string, id, role) FROM stdin;
3	user3@example.com	qwerty3	Debit Card	f	12347	2024-12-16 10:55:27.772313	\N	\N	\N	1	USER
4	user4@example.com	qwerty4	Bank Transfer	t	12348	2024-12-16 10:55:27.772313	\N	\N	\N	2	USER
5	user5@example.com	qwerty5	Credit Card	f	12349	2024-12-16 10:55:27.772313	\N	\N	\N	3	USER
6	user6@example.com	qwerty6	PayPal	t	12350	2024-12-16 10:55:27.772313	\N	\N	\N	4	USER
7	user7@example.com	qwerty7	Debit Card	f	12351	2024-12-16 10:55:27.772313	\N	\N	\N	5	USER
8	john.doe@gmail.com	hashed_password1	Credit Card	f	12345	2024-12-16 10:57:33.553492	\N	\N	\N	6	USER
9	jane.smith@yahoo.com	hashed_password2	PayPal	f	12346	2024-12-16 10:57:33.553492	\N	\N	\N	7	USER
10	mike.brown@outlook.com	hashed_password3	Debit Card	f	12347	2024-12-16 10:57:33.553492	\N	\N	\N	8	USER
11	anna.jones@hotmail.com	hashed_password4	Bank Transfer	t	12348	2024-12-16 10:57:33.553492	\N	\N	\N	9	USER
12	chris.evans@gmail.com	hashed_password5	Credit Card	f	12349	2024-12-16 10:57:33.553492	\N	\N	\N	10	USER
13	emily.davis@yahoo.com	hashed_password6	PayPal	t	12350	2024-12-16 10:57:33.553492	\N	\N	\N	11	USER
14	daniel.wilson@outlook.com	hashed_password7	Debit Card	f	12351	2024-12-16 10:57:33.553492	\N	\N	\N	12	USER
16	test@example.com	newpassword	\N	\N	\N	2025-01-07 12:28:55.49368	\N	\N	\N	13	USER
18	example@example.com	your_password	\N	\N	\N	2025-01-07 14:58:10.131733	\N	\N	\N	14	USER
1	user1@example.com	6dbd0fe19c9a301c4708287780df41a2	Credit Card	f	12345	2024-12-16 10:55:27.772313	\N	\N	\N	15	USER
2	user2@example.com	$2a$12$h798oPLa5kcXecxf4f3JVOD8BMB9.JEit4k6rQj7bOTBjocYgtdj6	PayPal	f	12346	2024-12-16 10:55:27.772313	\N	\N	\N	16	USER
19	j.lam-@outlook.com	$2a$12$o/7OinTw.XqoISsB05fRW.Xj06eks5UKZEpJkclwBtnHwZNmWVH6u	visa	f	\N	2025-01-08 10:30:37.119096	\N	\N	\N	17	USER
20	Ramon@outlook.com	$2a$10$YzcgAaakGvBzbbmDN5qmr.KzlFkrTUslk5zu8NCX3VX2P/Mwvjg6a	\N	\N	\N	2025-01-10 00:42:57.740868	\N	\N	\N	18	USER
21	montje@outlook.com	qwerty	pin	f	\N	2025-01-13 00:17:59.578	2025-01-13 01:17:00	Hash	geatg324	19	USER
22	montje2@outlook.com	qwerty		f	0	2025-01-13 00:20:00.162	2025-01-13 00:20:00.162			20	USER
23	montje1997@outlook.com	65e84be33532fb784c48129675f9eff3a682b27168c0ea744b2cf58ee02337c5	\N	f	\N	2025-01-13 00:44:55.129	\N	\N	\N	21	USER
24	montje1998@gmail.com	65e84be33532fb784c48129675f9eff3a682b27168c0ea744b2cf58ee02337c5	\N	f	\N	2025-01-13 00:52:38.468	\N	\N	\N	22	USER
27	dragon@outlook.com	65e84be33532fb784c48129675f9eff3a682b27168c0ea744b2cf58ee02337c5	\N	f	\N	2025-01-13 00:55:47.754	\N	\N	\N	23	USER
28	test2002@outlook.com	65e84be33532fb784c48129675f9eff3a682b27168c0ea744b2cf58ee02337c5	\N	f	\N	2025-01-13 01:35:27.236	\N	\N	\N	24	USER
33	test3@outlook.com	qwerty	\N	f	\N	2025-01-13 15:29:05.463	\N	\N	\N	25	USER
34	ramontje1997@outlook.com	$2a$10$2kQM64W6kkM1o7zWKUPX/OkQJ9Syn9CupHyw.vvvM6.1OoklVTc3u	\N	f	\N	2025-01-15 16:40:40.85172	\N	\N	\N	26	USER
35	long@outlook.com	$2a$10$gCqQ0QSTT6o5WLGMArh72.fEJRI/PoyPCZxb2tztGK6.EEn5ORtJa	\N	f	\N	2025-01-15 22:06:57.843	\N	\N	\N	27	ADMIN
37	long3@outlook.com	$2a$10$bDTrHkkP5ABDZsnuA7UtpeqpVaBoUklMsCz3uuS085PBzof4tNCf6	\N	f	\N	2025-01-16 02:10:03.808	\N	\N	\N	29	USER
41	looong@outlook.com	$2a$10$ecRCVov5bGIaQM8PAsn3ROKc6FCrS6Z7NhWR14f4./SgbVKFHCfA.	\N	f	\N	2025-01-16 03:10:18.856	\N	\N	\N	33	USER
42	poop@gmail.com	$2a$10$YCcHcSuhuBLCmjkM7FhqsuDhOY8oIG4UGYUUmsXDFuN3Z0I7IIhge	\N	f	\N	2025-01-16 03:14:21.048	\N	\N	\N	34	USER
38	loong@outlook.com	$2a$10$qfVUUgsO9WYnIshKOwUpju0OubbzagATG8Kbfp6sbIxivkMw2QqI.	\N	f	\N	2025-01-16 02:22:35.693	\N	\N	\N	30	USER
44	loong3@outlook.com	$2a$10$WvsnDB8oK3LURZRwDVtHv.1AqnQAIfAl4rrwitzFj43jXHMXWARdm	\N	f	\N	2025-01-16 21:35:09.869	\N	\N	\N	36	USER
46	long4@gmail.com	$2a$10$4AGNmeFBbhxQuKH5BwlE9uIJX3j1deCMAaumctvO/84/AnUxT2pte	\N	f	\N	2025-01-17 00:30:52.168	\N	\N	\N	38	USER
48	papichulo@gmail.com	$2a$10$c1N1xvwoGmbbGPAVW5Ho.OthgCMKky5bPoZQNS7yb1HsSb.hq13xS	\N	f	\N	2025-01-17 01:00:30.814	\N	\N	\N	40	USER
49	mega@outlook.com	$2a$10$pd06Uyx7aY//E4GOVUsDu.TOi.PDZfqs33.ETlnLlYWuWTV0cy0Um	\N	f	\N	2025-01-17 01:04:04.144	\N	\N	\N	41	USER
50	lam@outlook.com	$2a$10$fezkGMS3HhgfgBSl6QNEDe3FVdkzgVrXqGipXokdXahyUZdAWCZKO	\N	f	\N	2025-01-17 02:26:38.734	\N	\N	\N	42	USER
51	lam2@outlook.com	$2a$10$P4mggZh3smUGoorrkiluH.z7.s64RN7Mcm5JKaKFuTuO1CmAFKui6	\N	f	\N	2025-01-17 02:36:24.54	\N	\N	\N	43	USER
52	lam3@outlook.com	$2a$10$bqRWlpLQDSQXRgKL27l4CuXffTrZrZZNyFGvhqmJ9Fm8VnfhVnxbW	\N	f	\N	2025-01-17 02:39:27.93	\N	\N	\N	44	USER
55	pooop@gmail.com	$2a$10$n255BNT6CmJy7zVseIPof.U5z3kLA.TKwNscM5.LKC1hauglK2nzy	\N	f	\N	2025-01-17 09:18:17.368	\N	\N	\N	47	USER
56	momo@outlook.com	$2a$10$EVHCIV32GPH9aajlAv5CEOAq9QqwwJ7sNgPGwVCDDPt0nzhk.XNa6	\N	f	\N	2025-01-17 09:19:03.464	\N	\N	\N	48	USER
58	qazwsx@outlook.com	$2a$10$UgBeAKEV90PbJQbePvSHhu7jtw5FEmycsUYftAn0MgYnuhMkwOseK	\N	f	\N	2025-01-17 09:42:34.891	\N	\N	\N	50	USER
60	jia@gmail.com	$2a$10$kwSMEkgn59U8WDbBzTGqkuQ1AKTU7jEjNHY.Eh5mwx0t4DJpLFGyq	\N	f	\N	2025-01-17 10:48:56.739	\N	\N	\N	52	USER
61	newuser@example.com	$2a$10$hNo347s835G6pRHFqnaHnuTwwIPES/4WzvvTCP0TwO164c3X/zb52	\N	f	\N	2025-01-17 10:52:28.204	\N	\N	\N	53	USER
64	gerjan@gmail.com	$2a$10$lrKIQ4zTC8IzCAXGRGOHFuL9zFbvmf4wx9LvaRq8GcdOersjRcBgK	\N	f	\N	2025-01-17 15:29:38.444	\N	\N	\N	56	USER
\.


--
-- TOC entry 4010 (class 0 OID 18223)
-- Dependencies: 228
-- Data for Name: classification; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.classification (classification_id, minimum_age, characteristics) FROM stdin;
1	7	Family-friendly
2	13	Mild Violence
3	16	Strong Language
4	18	Explicit Content
5	10	Animated Content
6	12	Fantasy Violence
7	15	Suspense and Horror
\.


--
-- TOC entry 4020 (class 0 OID 18287)
-- Dependencies: 238
-- Data for Name: episode; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.episode (episode_id, title, duration, season_id) FROM stdin;
1	Pilot	00:58:00	1
2	Cats in the Bag	00:47:00	1
3	The Kingsroad	00:55:00	4
4	Winter Is Coming	01:02:00	4
5	Chapter One: The Vanishing	00:48:00	6
6	Chapter Two: The Weirdo	00:45:00	6
7	The Battle of Bastards	01:00:00	5
\.


--
-- TOC entry 4044 (class 0 OID 18766)
-- Dependencies: 263
-- Data for Name: external_api_log; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.external_api_log (log_id, api_name, request_payload, response_payload, created_at) FROM stdin;
1	Test API	{"test":"request"}	{"test":"response"}	2025-01-15 18:46:42.169829
2	User Activity Change	\N	(3,1,LOGIN,"2025-01-15 18:53:40.57277")	2025-01-15 18:53:40.57277
3	\N	\N	\N	2025-01-15 21:08:55.907151
\.


--
-- TOC entry 4004 (class 0 OID 18197)
-- Dependencies: 222
-- Data for Name: genre; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.genre (genre_id, genre_name) FROM stdin;
1	Action
2	Comedy
3	Drama
4	Horror
5	Thriller
6	Science Fiction
7	Romance
\.


--
-- TOC entry 4006 (class 0 OID 18206)
-- Dependencies: 224
-- Data for Name: movie; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.movie (movie_id, title, duration, release_date, description, is_featured, classification_id) FROM stdin;
1	The Dark Knight	02:32:00	2008-07-18	\N	\N	\N
2	Inception	02:28:00	2010-07-16	\N	\N	\N
3	Titanic	03:15:00	1997-12-19	\N	\N	\N
4	Avengers: Endgame	03:01:00	2019-04-26	\N	\N	\N
5	The Godfather	02:55:00	1972-03-24	\N	\N	\N
6	Jurassic Park	02:07:00	1993-06-11	\N	\N	\N
7	Interstellar	02:49:00	2014-11-07	\N	\N	\N
\.


--
-- TOC entry 4034 (class 0 OID 18412)
-- Dependencies: 252
-- Data for Name: movie_classification; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.movie_classification (movie_classification_id, movie_id, classification_id) FROM stdin;
1	1	3
2	2	2
3	3	7
4	4	3
5	5	4
6	6	5
7	7	6
\.


--
-- TOC entry 4030 (class 0 OID 18374)
-- Dependencies: 248
-- Data for Name: movie_genre; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.movie_genre (movie_genre_id, movie_id, genre_id) FROM stdin;
1	1	1
2	2	6
3	3	7
4	4	1
5	5	3
6	6	5
7	7	6
\.


--
-- TOC entry 4038 (class 0 OID 18450)
-- Dependencies: 256
-- Data for Name: movie_quality; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.movie_quality (movie_quality_id, movie_id, quality_id, is_available) FROM stdin;
1	1	4	t
2	2	3	t
3	3	2	t
4	4	5	t
5	5	3	t
6	6	4	t
7	7	6	t
\.


--
-- TOC entry 4022 (class 0 OID 18299)
-- Dependencies: 240
-- Data for Name: preferences; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.preferences (preference_id, profile_id, genre_id, age_preference, content_type, blacklist_classification) FROM stdin;
1	1	1	18	Movie	Explicit Content
2	2	7	10	Series	Family-friendly
3	3	3	16	Series	Mild Violence
4	4	6	18	Movie	Strong Language
5	5	4	12	Series	Fantasy Violence
6	6	2	14	Movie	Suspense and Horror
7	7	5	13	Series	Mild Violence
\.


--
-- TOC entry 4014 (class 0 OID 18240)
-- Dependencies: 232
-- Data for Name: profile; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.profile (profile_id, account_id, profile_image, profile_age, is_profile_child, language, profile_name) FROM stdin;
1	1	\N	28	f	English	John
2	1	\N	8	t	English	John Jr
3	2	\N	35	f	Spanish	Jane
4	3	\N	42	f	French	Mike
5	4	\N	12	t	German	Annas Kid
6	5	\N	31	f	Italian	Chris
7	6	\N	15	t	English	Emilys Child
\.


--
-- TOC entry 4012 (class 0 OID 18231)
-- Dependencies: 230
-- Data for Name: quality; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.quality (quality_id, quality_name, quality) FROM stdin;
1	SD	\N
2	HD	\N
3	Full HD	\N
4	4K	\N
5	HDR	\N
6	UHD	\N
7	8K	\N
\.


--
-- TOC entry 4018 (class 0 OID 18274)
-- Dependencies: 236
-- Data for Name: season; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.season (season_id, season_number, series_id) FROM stdin;
1	1	1
2	2	1
3	3	1
4	1	2
5	2	2
6	1	3
7	2	3
\.


--
-- TOC entry 4008 (class 0 OID 18213)
-- Dependencies: 226
-- Data for Name: series; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.series (series_id, title, description, total_seasons, release_date, is_featured) FROM stdin;
1	Breaking Bad	A chemistry teacher turned meth manufacturer.	5	2008-01-20	\N
2	Game of Thrones	A battle for the Iron Throne in Westeros.	8	2011-04-17	\N
3	Stranger Things	Kids uncover supernatural secrets in Hawkins.	4	2016-07-15	\N
4	The Witcher	A monster hunter struggles in a chaotic world.	3	2019-12-20	\N
5	The Office	A mockumentary about office life in Scranton.	9	2005-03-24	\N
6	Friends	Six friends navigate life and relationships.	10	1994-09-22	\N
7	Sherlock	A modern take on the famous detective.	4	2010-07-25	\N
\.


--
-- TOC entry 4036 (class 0 OID 18431)
-- Dependencies: 254
-- Data for Name: series_classification; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.series_classification (series_classification_id, series_id, classification_id) FROM stdin;
1	1	3
2	2	4
3	3	5
4	4	6
5	5	2
6	6	1
7	7	3
\.


--
-- TOC entry 4032 (class 0 OID 18393)
-- Dependencies: 250
-- Data for Name: series_genre; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.series_genre (series_genre_id, series_id, genre_id) FROM stdin;
1	1	3
2	2	5
3	3	6
4	4	1
5	5	2
6	6	2
7	7	3
\.


--
-- TOC entry 4040 (class 0 OID 18469)
-- Dependencies: 258
-- Data for Name: series_quality; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.series_quality (series_quality_id, series_id, quality_id) FROM stdin;
1	1	3
2	2	4
3	3	2
4	4	5
5	5	2
6	6	3
7	7	4
\.


--
-- TOC entry 4016 (class 0 OID 18256)
-- Dependencies: 234
-- Data for Name: subscription; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.subscription (subscription_id, account_id, subscription_type, description, subscription_price, discount, user_invitation, subscription_end_date, subscription_start_date) FROM stdin;
1	1	Premium	Full access in HD and 4K	15.99	0	f	\N	\N
2	2	Basic	Standard definition access	8.99	0	f	\N	\N
3	3	Standard	Access in HD quality	12.99	10	t	\N	\N
4	4	Premium	Full access in HD and 4K	15.99	5	t	\N	\N
5	5	Standard	Access in HD quality	12.99	0	f	\N	\N
6	6	Basic	Standard definition access	8.99	0	f	\N	\N
7	7	Premium	Full access in HD and 4K	15.99	0	t	\N	\N
\.


--
-- TOC entry 4026 (class 0 OID 18333)
-- Dependencies: 244
-- Data for Name: subtitle; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.subtitle (subtitle_id, movie_id, episode_id, language, subtitle_location, is_available) FROM stdin;
1	1	\N	English	/subtitles/dark_knight_en.srt	t
2	2	\N	Spanish	/subtitles/inception_es.srt	t
3	3	\N	French	/subtitles/titanic_fr.srt	t
4	\N	1	English	/subtitles/breaking_bad_s1e1_en.srt	t
5	\N	4	German	/subtitles/got_s1e2_de.srt	t
6	\N	5	Italian	/subtitles/stranger_things_s1e1_it.srt	t
\.


--
-- TOC entry 4046 (class 0 OID 18776)
-- Dependencies: 265
-- Data for Name: user_activity; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.user_activity (activity_id, account_id, activity_type, activity_timestamp) FROM stdin;
1	1	LOGIN	2025-01-15 18:48:51.087719
2	1	VIEW_MOVIE	2025-01-15 18:50:17.299632
3	1	LOGIN	2025-01-15 18:53:40.57277
\.


--
-- TOC entry 4024 (class 0 OID 18318)
-- Dependencies: 242
-- Data for Name: watch_history; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.watch_history (watch_history_id, profile_id, watch_date_time, times_watched, response_format, duration) FROM stdin;
1	1	2024-12-15 11:01:21.891012	2	\N	\N
2	2	2024-12-13 11:01:21.891012	1	\N	\N
3	3	2024-12-16 10:01:21.891012	3	\N	\N
4	4	2024-12-11 11:01:21.891012	1	\N	\N
5	5	2024-12-14 11:01:21.891012	4	\N	\N
6	6	2024-12-16 05:01:21.891012	2	\N	\N
7	7	2024-12-06 11:01:21.891012	1	\N	\N
\.


--
-- TOC entry 4028 (class 0 OID 18352)
-- Dependencies: 246
-- Data for Name: watch_list; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.watch_list (watch_list_id, profile_id, movie_id, episode_id, watchlist_id) FROM stdin;
1	1	1	\N	1
2	2	3	\N	2
3	3	\N	1	3
4	4	2	\N	4
5	5	\N	4	5
6	6	4	\N	6
7	7	\N	5	7
\.


--
-- TOC entry 4083 (class 0 OID 0)
-- Dependencies: 219
-- Name: account_account_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.account_account_id_seq', 64, true);


--
-- TOC entry 4084 (class 0 OID 0)
-- Dependencies: 260
-- Name: account_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.account_id_seq', 56, true);


--
-- TOC entry 4085 (class 0 OID 0)
-- Dependencies: 227
-- Name: classification_classification_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.classification_classification_id_seq', 7, true);


--
-- TOC entry 4086 (class 0 OID 0)
-- Dependencies: 237
-- Name: episode_episode_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.episode_episode_id_seq', 7, true);


--
-- TOC entry 4087 (class 0 OID 0)
-- Dependencies: 262
-- Name: external_api_log_log_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.external_api_log_log_id_seq', 3, true);


--
-- TOC entry 4088 (class 0 OID 0)
-- Dependencies: 221
-- Name: genre_genre_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.genre_genre_id_seq', 8, true);


--
-- TOC entry 4089 (class 0 OID 0)
-- Dependencies: 251
-- Name: movie_classification_movie_classification_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.movie_classification_movie_classification_id_seq', 7, true);


--
-- TOC entry 4090 (class 0 OID 0)
-- Dependencies: 247
-- Name: movie_genre_movie_genre_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.movie_genre_movie_genre_id_seq', 7, true);


--
-- TOC entry 4091 (class 0 OID 0)
-- Dependencies: 223
-- Name: movie_movie_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.movie_movie_id_seq', 7, true);


--
-- TOC entry 4092 (class 0 OID 0)
-- Dependencies: 255
-- Name: movie_quality_movie_quality_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.movie_quality_movie_quality_id_seq', 7, true);


--
-- TOC entry 4093 (class 0 OID 0)
-- Dependencies: 239
-- Name: preferences_preference_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.preferences_preference_id_seq', 7, true);


--
-- TOC entry 4094 (class 0 OID 0)
-- Dependencies: 231
-- Name: profile_profile_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.profile_profile_id_seq', 7, true);


--
-- TOC entry 4095 (class 0 OID 0)
-- Dependencies: 229
-- Name: quality_quality_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.quality_quality_id_seq', 7, true);


--
-- TOC entry 4096 (class 0 OID 0)
-- Dependencies: 235
-- Name: season_season_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.season_season_id_seq', 7, true);


--
-- TOC entry 4097 (class 0 OID 0)
-- Dependencies: 253
-- Name: series_classification_series_classification_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.series_classification_series_classification_id_seq', 7, true);


--
-- TOC entry 4098 (class 0 OID 0)
-- Dependencies: 249
-- Name: series_genre_series_genre_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.series_genre_series_genre_id_seq', 8, true);


--
-- TOC entry 4099 (class 0 OID 0)
-- Dependencies: 257
-- Name: series_quality_series_quality_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.series_quality_series_quality_id_seq', 7, true);


--
-- TOC entry 4100 (class 0 OID 0)
-- Dependencies: 225
-- Name: series_series_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.series_series_id_seq', 7, true);


--
-- TOC entry 4101 (class 0 OID 0)
-- Dependencies: 233
-- Name: subscription_subscription_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.subscription_subscription_id_seq', 7, true);


--
-- TOC entry 4102 (class 0 OID 0)
-- Dependencies: 243
-- Name: subtitle_subtitle_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.subtitle_subtitle_id_seq', 6, true);


--
-- TOC entry 4103 (class 0 OID 0)
-- Dependencies: 264
-- Name: user_activity_activity_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.user_activity_activity_id_seq', 3, true);


--
-- TOC entry 4104 (class 0 OID 0)
-- Dependencies: 241
-- Name: watch_history_watch_history_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.watch_history_watch_history_id_seq', 7, true);


--
-- TOC entry 4105 (class 0 OID 0)
-- Dependencies: 245
-- Name: watch_list_watch_list_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.watch_list_watch_list_id_seq', 7, true);


--
-- TOC entry 4106 (class 0 OID 0)
-- Dependencies: 259
-- Name: watch_list_watchlist_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.watch_list_watchlist_id_seq', 7, true);


--
-- TOC entry 3727 (class 2606 OID 18195)
-- Name: account account_email_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.account
    ADD CONSTRAINT account_email_key UNIQUE (email);


--
-- TOC entry 3729 (class 2606 OID 18193)
-- Name: account account_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.account
    ADD CONSTRAINT account_pkey PRIMARY KEY (account_id);


--
-- TOC entry 3741 (class 2606 OID 18229)
-- Name: classification classification_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.classification
    ADD CONSTRAINT classification_pkey PRIMARY KEY (classification_id);


--
-- TOC entry 3753 (class 2606 OID 18292)
-- Name: episode episode_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.episode
    ADD CONSTRAINT episode_pkey PRIMARY KEY (episode_id);


--
-- TOC entry 3791 (class 2606 OID 18774)
-- Name: external_api_log external_api_log_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.external_api_log
    ADD CONSTRAINT external_api_log_pkey PRIMARY KEY (log_id);


--
-- TOC entry 3731 (class 2606 OID 18204)
-- Name: genre genre_genre_name_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.genre
    ADD CONSTRAINT genre_genre_name_key UNIQUE (genre_name);


--
-- TOC entry 3733 (class 2606 OID 18202)
-- Name: genre genre_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.genre
    ADD CONSTRAINT genre_pkey PRIMARY KEY (genre_id);


--
-- TOC entry 3775 (class 2606 OID 18419)
-- Name: movie_classification movie_classification_movie_id_classification_id_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.movie_classification
    ADD CONSTRAINT movie_classification_movie_id_classification_id_key UNIQUE (movie_id, classification_id);


--
-- TOC entry 3777 (class 2606 OID 18417)
-- Name: movie_classification movie_classification_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.movie_classification
    ADD CONSTRAINT movie_classification_pkey PRIMARY KEY (movie_classification_id);


--
-- TOC entry 3763 (class 2606 OID 18381)
-- Name: movie_genre movie_genre_movie_id_genre_id_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.movie_genre
    ADD CONSTRAINT movie_genre_movie_id_genre_id_key UNIQUE (movie_id, genre_id);


--
-- TOC entry 3765 (class 2606 OID 18379)
-- Name: movie_genre movie_genre_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.movie_genre
    ADD CONSTRAINT movie_genre_pkey PRIMARY KEY (movie_genre_id);


--
-- TOC entry 3735 (class 2606 OID 18211)
-- Name: movie movie_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.movie
    ADD CONSTRAINT movie_pkey PRIMARY KEY (movie_id);


--
-- TOC entry 3783 (class 2606 OID 18457)
-- Name: movie_quality movie_quality_movie_id_quality_id_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.movie_quality
    ADD CONSTRAINT movie_quality_movie_id_quality_id_key UNIQUE (movie_id, quality_id);


--
-- TOC entry 3785 (class 2606 OID 18455)
-- Name: movie_quality movie_quality_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.movie_quality
    ADD CONSTRAINT movie_quality_pkey PRIMARY KEY (movie_quality_id);


--
-- TOC entry 3755 (class 2606 OID 18306)
-- Name: preferences preferences_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.preferences
    ADD CONSTRAINT preferences_pkey PRIMARY KEY (preference_id);


--
-- TOC entry 3747 (class 2606 OID 18249)
-- Name: profile profile_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.profile
    ADD CONSTRAINT profile_pkey PRIMARY KEY (profile_id);


--
-- TOC entry 3743 (class 2606 OID 18236)
-- Name: quality quality_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.quality
    ADD CONSTRAINT quality_pkey PRIMARY KEY (quality_id);


--
-- TOC entry 3745 (class 2606 OID 18238)
-- Name: quality quality_quality_name_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.quality
    ADD CONSTRAINT quality_quality_name_key UNIQUE (quality_name);


--
-- TOC entry 3751 (class 2606 OID 18280)
-- Name: season season_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.season
    ADD CONSTRAINT season_pkey PRIMARY KEY (season_id);


--
-- TOC entry 3779 (class 2606 OID 18436)
-- Name: series_classification series_classification_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.series_classification
    ADD CONSTRAINT series_classification_pkey PRIMARY KEY (series_classification_id);


--
-- TOC entry 3781 (class 2606 OID 18438)
-- Name: series_classification series_classification_series_id_classification_id_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.series_classification
    ADD CONSTRAINT series_classification_series_id_classification_id_key UNIQUE (series_id, classification_id);


--
-- TOC entry 3769 (class 2606 OID 18398)
-- Name: series_genre series_genre_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.series_genre
    ADD CONSTRAINT series_genre_pkey PRIMARY KEY (series_genre_id);


--
-- TOC entry 3771 (class 2606 OID 18400)
-- Name: series_genre series_genre_series_id_genre_id_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.series_genre
    ADD CONSTRAINT series_genre_series_id_genre_id_key UNIQUE (series_id, genre_id);


--
-- TOC entry 3739 (class 2606 OID 18221)
-- Name: series series_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.series
    ADD CONSTRAINT series_pkey PRIMARY KEY (series_id);


--
-- TOC entry 3787 (class 2606 OID 18474)
-- Name: series_quality series_quality_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.series_quality
    ADD CONSTRAINT series_quality_pkey PRIMARY KEY (series_quality_id);


--
-- TOC entry 3789 (class 2606 OID 18476)
-- Name: series_quality series_quality_series_id_quality_id_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.series_quality
    ADD CONSTRAINT series_quality_series_id_quality_id_key UNIQUE (series_id, quality_id);


--
-- TOC entry 3749 (class 2606 OID 18267)
-- Name: subscription subscription_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.subscription
    ADD CONSTRAINT subscription_pkey PRIMARY KEY (subscription_id);


--
-- TOC entry 3759 (class 2606 OID 18340)
-- Name: subtitle subtitle_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.subtitle
    ADD CONSTRAINT subtitle_pkey PRIMARY KEY (subtitle_id);


--
-- TOC entry 3737 (class 2606 OID 26736)
-- Name: movie uk1uwb2xrs7u3eralwlo4ytxbnu; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.movie
    ADD CONSTRAINT uk1uwb2xrs7u3eralwlo4ytxbnu UNIQUE (classification_id);


--
-- TOC entry 3767 (class 2606 OID 18792)
-- Name: movie_genre unique_movie_genre; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.movie_genre
    ADD CONSTRAINT unique_movie_genre UNIQUE (movie_id, genre_id);


--
-- TOC entry 3773 (class 2606 OID 18794)
-- Name: series_genre unique_series_genre; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.series_genre
    ADD CONSTRAINT unique_series_genre UNIQUE (series_id, genre_id);


--
-- TOC entry 3793 (class 2606 OID 18782)
-- Name: user_activity user_activity_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.user_activity
    ADD CONSTRAINT user_activity_pkey PRIMARY KEY (activity_id);


--
-- TOC entry 3757 (class 2606 OID 18326)
-- Name: watch_history watch_history_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.watch_history
    ADD CONSTRAINT watch_history_pkey PRIMARY KEY (watch_history_id);


--
-- TOC entry 3761 (class 2606 OID 18357)
-- Name: watch_list watch_list_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.watch_list
    ADD CONSTRAINT watch_list_pkey PRIMARY KEY (watch_list_id);


--
-- TOC entry 3847 (class 2620 OID 18790)
-- Name: watch_history age_restriction_trigger; Type: TRIGGER; Schema: public; Owner: postgres
--

CREATE TRIGGER age_restriction_trigger BEFORE INSERT OR UPDATE ON public.watch_history FOR EACH ROW EXECUTE FUNCTION public.enforce_age_restriction();


--
-- TOC entry 3848 (class 2620 OID 18827)
-- Name: watch_history feature_based_on_watches; Type: TRIGGER; Schema: public; Owner: postgres
--

CREATE TRIGGER feature_based_on_watches AFTER INSERT OR UPDATE ON public.watch_history FOR EACH ROW EXECUTE FUNCTION public.mark_as_featured();


--
-- TOC entry 3849 (class 2620 OID 18829)
-- Name: user_activity log_user_activity_trigger; Type: TRIGGER; Schema: public; Owner: postgres
--

CREATE TRIGGER log_user_activity_trigger AFTER INSERT OR DELETE OR UPDATE ON public.user_activity FOR EACH ROW EXECUTE FUNCTION public.log_user_activity_changes();


--
-- TOC entry 3843 (class 2620 OID 18488)
-- Name: profile profile_limit_trigger; Type: TRIGGER; Schema: public; Owner: postgres
--

CREATE TRIGGER profile_limit_trigger BEFORE INSERT OR UPDATE ON public.profile FOR EACH ROW EXECUTE FUNCTION public.check_profile_limit();


--
-- TOC entry 3844 (class 2620 OID 18820)
-- Name: subscription subscription_discount_trigger; Type: TRIGGER; Schema: public; Owner: postgres
--

CREATE TRIGGER subscription_discount_trigger BEFORE INSERT OR UPDATE ON public.subscription FOR EACH ROW EXECUTE FUNCTION public.validate_subscription_discount();


--
-- TOC entry 3845 (class 2620 OID 18825)
-- Name: subscription subscription_end_date_trigger; Type: TRIGGER; Schema: public; Owner: postgres
--

CREATE TRIGGER subscription_end_date_trigger BEFORE INSERT OR UPDATE ON public.subscription FOR EACH ROW EXECUTE FUNCTION public.calculate_subscription_end_date();


--
-- TOC entry 3846 (class 2620 OID 18823)
-- Name: season update_series_seasons_trigger; Type: TRIGGER; Schema: public; Owner: postgres
--

CREATE TRIGGER update_series_seasons_trigger AFTER INSERT OR DELETE ON public.season FOR EACH ROW EXECUTE FUNCTION public.update_series_total_seasons();


--
-- TOC entry 3821 (class 2606 OID 18293)
-- Name: episode episode_season_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.episode
    ADD CONSTRAINT episode_season_id_fkey FOREIGN KEY (season_id) REFERENCES public.season(season_id);


--
-- TOC entry 3817 (class 2606 OID 26737)
-- Name: movie fkn9wxsh6s14m5e3rvm0cojeu3u; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.movie
    ADD CONSTRAINT fkn9wxsh6s14m5e3rvm0cojeu3u FOREIGN KEY (classification_id) REFERENCES public.classification(classification_id);


--
-- TOC entry 3834 (class 2606 OID 18425)
-- Name: movie_classification movie_classification_classification_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.movie_classification
    ADD CONSTRAINT movie_classification_classification_id_fkey FOREIGN KEY (classification_id) REFERENCES public.classification(classification_id);


--
-- TOC entry 3835 (class 2606 OID 18420)
-- Name: movie_classification movie_classification_movie_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.movie_classification
    ADD CONSTRAINT movie_classification_movie_id_fkey FOREIGN KEY (movie_id) REFERENCES public.movie(movie_id);


--
-- TOC entry 3830 (class 2606 OID 18387)
-- Name: movie_genre movie_genre_genre_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.movie_genre
    ADD CONSTRAINT movie_genre_genre_id_fkey FOREIGN KEY (genre_id) REFERENCES public.genre(genre_id);


--
-- TOC entry 3831 (class 2606 OID 18382)
-- Name: movie_genre movie_genre_movie_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.movie_genre
    ADD CONSTRAINT movie_genre_movie_id_fkey FOREIGN KEY (movie_id) REFERENCES public.movie(movie_id);


--
-- TOC entry 3838 (class 2606 OID 18458)
-- Name: movie_quality movie_quality_movie_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.movie_quality
    ADD CONSTRAINT movie_quality_movie_id_fkey FOREIGN KEY (movie_id) REFERENCES public.movie(movie_id);


--
-- TOC entry 3839 (class 2606 OID 18463)
-- Name: movie_quality movie_quality_quality_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.movie_quality
    ADD CONSTRAINT movie_quality_quality_id_fkey FOREIGN KEY (quality_id) REFERENCES public.quality(quality_id);


--
-- TOC entry 3822 (class 2606 OID 18312)
-- Name: preferences preferences_genre_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.preferences
    ADD CONSTRAINT preferences_genre_id_fkey FOREIGN KEY (genre_id) REFERENCES public.genre(genre_id);


--
-- TOC entry 3823 (class 2606 OID 18307)
-- Name: preferences preferences_profile_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.preferences
    ADD CONSTRAINT preferences_profile_id_fkey FOREIGN KEY (profile_id) REFERENCES public.profile(profile_id);


--
-- TOC entry 3818 (class 2606 OID 18737)
-- Name: profile profile_account_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.profile
    ADD CONSTRAINT profile_account_id_fkey FOREIGN KEY (account_id) REFERENCES public.account(account_id);


--
-- TOC entry 3820 (class 2606 OID 18281)
-- Name: season season_series_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.season
    ADD CONSTRAINT season_series_id_fkey FOREIGN KEY (series_id) REFERENCES public.series(series_id);


--
-- TOC entry 3836 (class 2606 OID 18444)
-- Name: series_classification series_classification_classification_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.series_classification
    ADD CONSTRAINT series_classification_classification_id_fkey FOREIGN KEY (classification_id) REFERENCES public.classification(classification_id);


--
-- TOC entry 3837 (class 2606 OID 18439)
-- Name: series_classification series_classification_series_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.series_classification
    ADD CONSTRAINT series_classification_series_id_fkey FOREIGN KEY (series_id) REFERENCES public.series(series_id);


--
-- TOC entry 3832 (class 2606 OID 18406)
-- Name: series_genre series_genre_genre_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.series_genre
    ADD CONSTRAINT series_genre_genre_id_fkey FOREIGN KEY (genre_id) REFERENCES public.genre(genre_id);


--
-- TOC entry 3833 (class 2606 OID 18401)
-- Name: series_genre series_genre_series_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.series_genre
    ADD CONSTRAINT series_genre_series_id_fkey FOREIGN KEY (series_id) REFERENCES public.series(series_id);


--
-- TOC entry 3840 (class 2606 OID 18482)
-- Name: series_quality series_quality_quality_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.series_quality
    ADD CONSTRAINT series_quality_quality_id_fkey FOREIGN KEY (quality_id) REFERENCES public.quality(quality_id);


--
-- TOC entry 3841 (class 2606 OID 18477)
-- Name: series_quality series_quality_series_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.series_quality
    ADD CONSTRAINT series_quality_series_id_fkey FOREIGN KEY (series_id) REFERENCES public.series(series_id);


--
-- TOC entry 3819 (class 2606 OID 18748)
-- Name: subscription subscription_account_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.subscription
    ADD CONSTRAINT subscription_account_id_fkey FOREIGN KEY (account_id) REFERENCES public.account(account_id);


--
-- TOC entry 3825 (class 2606 OID 18346)
-- Name: subtitle subtitle_episode_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.subtitle
    ADD CONSTRAINT subtitle_episode_id_fkey FOREIGN KEY (episode_id) REFERENCES public.episode(episode_id);


--
-- TOC entry 3826 (class 2606 OID 18341)
-- Name: subtitle subtitle_movie_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.subtitle
    ADD CONSTRAINT subtitle_movie_id_fkey FOREIGN KEY (movie_id) REFERENCES public.movie(movie_id);


--
-- TOC entry 3842 (class 2606 OID 18783)
-- Name: user_activity user_activity_account_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.user_activity
    ADD CONSTRAINT user_activity_account_id_fkey FOREIGN KEY (account_id) REFERENCES public.account(account_id);


--
-- TOC entry 3824 (class 2606 OID 18327)
-- Name: watch_history watch_history_profile_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.watch_history
    ADD CONSTRAINT watch_history_profile_id_fkey FOREIGN KEY (profile_id) REFERENCES public.profile(profile_id);


--
-- TOC entry 3827 (class 2606 OID 18368)
-- Name: watch_list watch_list_episode_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.watch_list
    ADD CONSTRAINT watch_list_episode_id_fkey FOREIGN KEY (episode_id) REFERENCES public.episode(episode_id);


--
-- TOC entry 3828 (class 2606 OID 18363)
-- Name: watch_list watch_list_movie_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.watch_list
    ADD CONSTRAINT watch_list_movie_id_fkey FOREIGN KEY (movie_id) REFERENCES public.movie(movie_id);


--
-- TOC entry 3829 (class 2606 OID 18358)
-- Name: watch_list watch_list_profile_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.watch_list
    ADD CONSTRAINT watch_list_profile_id_fkey FOREIGN KEY (profile_id) REFERENCES public.profile(profile_id);


--
-- TOC entry 4060 (class 0 OID 0)
-- Dependencies: 267
-- Name: TABLE junior_account_view; Type: ACL; Schema: public; Owner: postgres
--

GRANT SELECT ON TABLE public.junior_account_view TO junior_user;
GRANT SELECT ON TABLE public.junior_account_view TO api_user;


--
-- TOC entry 4061 (class 0 OID 0)
-- Dependencies: 261
-- Name: TABLE junior_profile_view; Type: ACL; Schema: public; Owner: postgres
--

GRANT SELECT ON TABLE public.junior_profile_view TO admin;


--
-- TOC entry 4062 (class 0 OID 0)
-- Dependencies: 268
-- Name: TABLE medior_account_view; Type: ACL; Schema: public; Owner: postgres
--

GRANT SELECT ON TABLE public.medior_account_view TO medior_user;
GRANT SELECT ON TABLE public.medior_account_view TO api_user;


--
-- TOC entry 4063 (class 0 OID 0)
-- Dependencies: 266
-- Name: TABLE medior_profile_view; Type: ACL; Schema: public; Owner: postgres
--

GRANT SELECT ON TABLE public.medior_profile_view TO admin;


--
-- TOC entry 4072 (class 0 OID 0)
-- Dependencies: 269
-- Name: TABLE senior_account_view; Type: ACL; Schema: public; Owner: postgres
--

GRANT SELECT ON TABLE public.senior_account_view TO senior_user;
GRANT SELECT ON TABLE public.senior_account_view TO api_user;


--
-- TOC entry 4080 (class 0 OID 0)
-- Dependencies: 270
-- Name: TABLE view_movies; Type: ACL; Schema: public; Owner: admin
--

GRANT SELECT ON TABLE public.view_movies TO api_user;


-- Completed on 2025-01-19 18:14:02 CET

--
-- PostgreSQL database dump complete
--

--
-- Database "postgres" dump
--

\connect postgres

--
-- PostgreSQL database dump
--

-- Dumped from database version 17.2
-- Dumped by pg_dump version 17.2

-- Started on 2025-01-19 18:14:02 CET

SET statement_timeout = 0;
SET lock_timeout = 0;
SET idle_in_transaction_session_timeout = 0;
SET transaction_timeout = 0;
SET client_encoding = 'UTF8';
SET standard_conforming_strings = on;
SELECT pg_catalog.set_config('search_path', '', false);
SET check_function_bodies = false;
SET xmloption = content;
SET client_min_messages = warning;
SET row_security = off;

--
-- TOC entry 7 (class 2615 OID 19755)
-- Name: pgagent; Type: SCHEMA; Schema: -; Owner: admin
--

CREATE SCHEMA pgagent;


ALTER SCHEMA pgagent OWNER TO admin;

--
-- TOC entry 3710 (class 0 OID 0)
-- Dependencies: 7
-- Name: SCHEMA pgagent; Type: COMMENT; Schema: -; Owner: admin
--

COMMENT ON SCHEMA pgagent IS 'pgAgent system tables';


--
-- TOC entry 2 (class 3079 OID 19756)
-- Name: pgagent; Type: EXTENSION; Schema: -; Owner: -
--

CREATE EXTENSION IF NOT EXISTS pgagent WITH SCHEMA pgagent;


--
-- TOC entry 3711 (class 0 OID 0)
-- Dependencies: 2
-- Name: EXTENSION pgagent; Type: COMMENT; Schema: -; Owner: 
--

COMMENT ON EXTENSION pgagent IS 'A PostgreSQL job scheduler';


--
-- TOC entry 3488 (class 0 OID 19757)
-- Dependencies: 223
-- Data for Name: pga_jobagent; Type: TABLE DATA; Schema: pgagent; Owner: admin
--

COPY pgagent.pga_jobagent (jagpid, jaglogintime, jagstation) FROM stdin;
886	2025-01-16 23:41:34.512783+01	Jias-MacBook-Air.local
\.


--
-- TOC entry 3489 (class 0 OID 19766)
-- Dependencies: 225
-- Data for Name: pga_jobclass; Type: TABLE DATA; Schema: pgagent; Owner: admin
--

COPY pgagent.pga_jobclass (jclid, jclname) FROM stdin;
\.


--
-- TOC entry 3490 (class 0 OID 19776)
-- Dependencies: 227
-- Data for Name: pga_job; Type: TABLE DATA; Schema: pgagent; Owner: admin
--

COPY pgagent.pga_job (jobid, jobjclid, jobname, jobdesc, jobhostagent, jobenabled, jobcreated, jobchanged, jobagentid, jobnextrun, joblastrun) FROM stdin;
1	1	auto_backup_v1			t	2025-01-16 21:31:20.157545+01	2025-01-16 21:31:20.157545+01	\N	2025-01-24 22:00:00+01	2025-01-17 23:05:30.050229+01
\.


--
-- TOC entry 3492 (class 0 OID 19824)
-- Dependencies: 231
-- Data for Name: pga_schedule; Type: TABLE DATA; Schema: pgagent; Owner: admin
--

COPY pgagent.pga_schedule (jscid, jscjobid, jscname, jscdesc, jscenabled, jscstart, jscend, jscminutes, jschours, jscweekdays, jscmonthdays, jscmonths) FROM stdin;
1	1	1		t	2025-01-17 12:45:00+01	2025-01-31 00:00:00+01	{f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f}	{f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,t,f}	{f,f,f,f,f,t,f}	{f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f}	{f,f,f,f,f,f,f,f,f,f,f,f}
\.


--
-- TOC entry 3493 (class 0 OID 19852)
-- Dependencies: 233
-- Data for Name: pga_exception; Type: TABLE DATA; Schema: pgagent; Owner: admin
--

COPY pgagent.pga_exception (jexid, jexscid, jexdate, jextime) FROM stdin;
\.


--
-- TOC entry 3494 (class 0 OID 19866)
-- Dependencies: 235
-- Data for Name: pga_joblog; Type: TABLE DATA; Schema: pgagent; Owner: admin
--

COPY pgagent.pga_joblog (jlgid, jlgjobid, jlgstatus, jlgstart, jlgduration) FROM stdin;
1	1	f	2025-01-17 12:45:41.266696+01	00:00:00.050626
2	1	f	2025-01-17 22:13:44.805206+01	00:00:00.034265
3	1	f	2025-01-17 22:28:50.022589+01	00:00:00.038859
4	1	f	2025-01-17 22:43:07.62227+01	00:00:00.056907
5	1	f	2025-01-17 22:44:00.490518+01	00:00:00.021491
6	1	f	2025-01-17 22:45:03.868568+01	00:00:00.023433
7	1	f	2025-01-17 22:46:01.962311+01	00:00:00.024057
8	1	f	2025-01-17 22:47:05.087393+01	00:00:00.025507
9	1	f	2025-01-17 22:48:03.183622+01	00:00:00.032893
10	1	f	2025-01-17 22:49:02.205852+01	00:00:00.030291
11	1	f	2025-01-17 22:50:04.258399+01	00:00:00.0263
12	1	f	2025-01-17 23:05:30.05509+01	00:00:00.027119
\.


--
-- TOC entry 3491 (class 0 OID 19800)
-- Dependencies: 229
-- Data for Name: pga_jobstep; Type: TABLE DATA; Schema: pgagent; Owner: admin
--

COPY pgagent.pga_jobstep (jstid, jstjobid, jstname, jstdesc, jstenabled, jstkind, jstcode, jstconnstr, jstdbname, jstonerror, jscnextrun) FROM stdin;
1	1	1		t	b	pg_dump --username=admin --dbname=DP_netflix --clean --file=/home/DP_netflix/backup-`date +%Y-%m-%d-%H-%M-%S`.sql			f	\N
\.


--
-- TOC entry 3495 (class 0 OID 19882)
-- Dependencies: 237
-- Data for Name: pga_jobsteplog; Type: TABLE DATA; Schema: pgagent; Owner: admin
--

COPY pgagent.pga_jobsteplog (jslid, jsljlgid, jsljstid, jslstatus, jslresult, jslstart, jslduration, jsloutput) FROM stdin;
1	1	1	f	127	2025-01-17 12:45:41.273149+01	00:00:00.043005	\nScript Error: \n/var/folders/3v/gdkmvjd95d3732lktcp4cr4r0000gq/T//pga_1_1_GPfsxP/1_1.scr: line 1: pg_dump: command not found\n\n
2	2	1	f	127	2025-01-17 22:13:44.81058+01	00:00:00.027495	
3	3	1	f	127	2025-01-17 22:28:50.023964+01	00:00:00.036625	
4	4	1	f	127	2025-01-17 22:43:07.622731+01	00:00:00.055849	
5	5	1	f	127	2025-01-17 22:44:00.492791+01	00:00:00.01836	
6	6	1	f	127	2025-01-17 22:45:03.871381+01	00:00:00.019212	
7	7	1	f	127	2025-01-17 22:46:01.965128+01	00:00:00.019959	
8	8	1	f	127	2025-01-17 22:47:05.089324+01	00:00:00.022535	
9	9	1	f	127	2025-01-17 22:48:03.187729+01	00:00:00.028075	
10	10	1	f	127	2025-01-17 22:49:02.209466+01	00:00:00.025162	
11	11	1	f	127	2025-01-17 22:50:04.261765+01	00:00:00.021659	
12	12	1	f	127	2025-01-17 23:05:30.057363+01	00:00:00.023713	
\.


-- Completed on 2025-01-19 18:14:02 CET

--
-- PostgreSQL database dump complete
--

-- Completed on 2025-01-19 18:14:02 CET

--
-- PostgreSQL database cluster dump complete
--

